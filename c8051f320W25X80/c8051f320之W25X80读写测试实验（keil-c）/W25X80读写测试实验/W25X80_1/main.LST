C51 COMPILER V8.08   MAIN                                                                  09/02/2011 10:20:17 PAGE 1   


C51 COMPILER V8.08, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: D:\Keil for C8051\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          //---------------------------------------------------------------------------------
   2          //
   3          //                                                                W25X80测试程序（.C）
   4          //                               功能：在某些地址写入一些数字，再读出来并在数码管上显示出来             
   5          //                               连接：J3的3和5短接                                                                                     
   6          //                                                          2011年2月24日
   7          //---------------------------------------------------------------------------------
   8          
   9          #include "W25X80Driver.h"
  10          #include "SMGDriver.h"
  11          #include <C8051F320.H>
  12          
  13          //=================================================================================
  14          //                                   内部函数定义
  15          //=================================================================================
  16          //---------------------------------------------------
  17          //函数功能：设置系统时钟
  18          //---------------------------------------------------
  19          void SYSCLK_Init ()
  20          {  
  21   1              OSCICN = 0x83; 
  22   1      }
  23          //---------------------------------------------------
  24          //函数功能：配置交叉开关，设置输入输出方式
  25          //---------------------------------------------------    
  26          void Port_Init()
  27          {                   
  28   1              W25X80_Port_Init();
  29   1              SMG_Port_Init();                                 
  30   1      }
  31          //---------------------------------------------------
  32          //函数功能：延时函数
  33          //---------------------------------------------------
  34          void delay(long n)                 
  35          {
  36   1              long i;
  37   1              while(n--)
  38   1                      for (i=0;i<12000;i++);
  39   1      }
  40          //------------------------------------------------------------------------------------------
  41          
  42          //=================================================================================
  43          //                                   主函数定义
  44          //=================================================================================
  45          void main()
  46          {
  47   1              unsigned char count,dat;
  48   1              PCA0MD &= ~0x40;
  49   1              SYSCLK_Init();
  50   1              Port_Init();
  51   1              while(1)
  52   1              {
  53   2                      ChipErase();
  54   2                      while(1)
  55   2                              for(count=0;count<16;count++)
C51 COMPILER V8.08   MAIN                                                                  09/02/2011 10:20:17 PAGE 2   

  56   2                              {
  57   3                                      ProgramFlash(count,&count,1);
  58   3                                      ReadFlash(count,&dat,1);
  59   3                                      lightSMG(0x01,dat);
  60   3                                      delay(10);
  61   3                              }
  62   2              }       
  63   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    169    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      10
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
